---
title: 'GraphQL'
date: 2021-01-25 12:21:13
category: 'DNS'
draft: false
---

# GraphQL

GraphQL 이란 Server API를 구성하기 위해 페이스북에서 만든 Query Language 입니다.

### Server API

Server API란 요청을 하면 요청에 따른 응답을 주는 Endpoint(API가 서버에서 리소스에 접근할 수 있도록 가능하게 하는 URL, 주소)를 웹을 통해 노충하는것을 말합니다.  
요청 ----> 응답  
Server API를 만드는 방법론으로 REST API가 있으며 RESTful API에관해서는 이전에 정리를 하였습니다.

### API란?

Application Programming Interface 즉 응용프로그램 프로그래밍 인터페이스 입니다.
응용프로그램에서 사용할 수 있도록 운영체제나 프로그래밍 언어가 제공하는 기능을 제어할 수 있게 만든 인터페이스를 의미합니다.  
또한 데이터베이스 관리 시스템과 같은 시스템 프로그램과 통신할 때 사용되는 언어나 메시지 형식을 가지며,
주로 파일 제어, 창 제어, 화상 처리, 문자 제어등을 위한 인터페이스를 제공합니다.

### RESTful API

REpresentational State Transfer  
말 그대로 셀프서술식이며 모든 리소스들을 하나의 엔드포인트에 연결해놓고, 각각의 엔드포인트들은 해당 리소스와 관련된 내용만 관리하며
엔드포인트를 리소스 관련해서 이름을 짓고 http 메소드로 행위를 정의하는 방식입니다.

### GraphQL에 관하여

Graph Query Language의 줄임말 입니다.  
쿼리 랭귀지란 말 그대로 정보를 얻기 위해 질의문(쿼리)을 만들기 위해 사용되는 컴퓨터 언어의 일종입니다.

#### 왜 페이스북은 GraphQL을 만들었을까?

- RESTful API로 다양한 기기에서 필요한 정보를 일일히 구현하는 것에대한 어려움
- ios 와 android에서 필요한 정보가 다른 상황이 있다면 그 다른 부분마다 API를 구현하는 것에대한 어려움

## GraphQL과 RESTful의 차이

1. GraphQL은 주로 하나의 엔드포인트를 사용한다.
   RESTful은 리소스마다 하나의 엔드포인트를 가지고 있지만, GraphQL은 전체 API를 위해 하나의 엔드포인트만 사용합니다.

2. GraphQL은 요청할 때 사용한 쿼리문에 따라 응답의 구조가 달라진다.
   RESTful은 하나의 엔드포인트에서 받는 응답의 구조가 정해져 있는 경우가 많습니다. 즉 이미 정해놓은 구조로 응답이 오게 됩니다.
   그에 비해 GraphQL은 사용자가 응답의 구조를 자신이 원하는 방식으로 바꿀 수 있습니다.

#### Overfetch Underfetch

- Overfetch: 요청에 대한 응답이 필요한 정보보다 많은 정보를 받는것을 말하며, API의 세분화가 제대로 이루어지지 않았을때 생깁니다.
- Underfetch: 오버페치와 반대로 API를 구체적으로 세분화하여 하나의 API에서 필요한 정보를 다 응답받지 못해 여러번 요청을 해야할 경우입니다.

## 장단점

둘의 차이로 인하여 각각의 장단점이 생기게 됩니다.

#### GraphQl의 장점

1. HTTP 요청의 횟수를 줄일 수 있다.
   RESTful은 각 리소스별로 요청을 해야하고, 따라서 요청 횟수가 필요한 자원의 종류에 비례합니다.
   반면 GraphQL은 원하는 정보를 하나의 쿼리에 모두 담아 요청하는것이 가능합니다.

2. HTTP 응답의 Size를 줄일 수 있다.
   RESTful은 응답의 형태가 정해져있고, 따라서 필요한 정보만 부분적으로 요청하는것이 어렵습니다.
   반면 GraphQL은 원하는 대로 정보를 요청하는 것이 가능합니다.

#### GraphQL의 단점

1. 고정된 요청과 응답만 필요할 경우에는 쿼리로 인해 요청의 크기가 REST에 비해 커진다.
2. 파일 전송 등 텍스트 만으로 하기 힘든 내용들을 처리하기 복잡하다.
3. 재귀적인 쿼리가 불가능하다.
